@if (loading$ | async) {
  <camunda-loader></camunda-loader>
}

@if (submit$ | async) {
  <ng-container></ng-container>
}

<mat-card>
  <mat-card-title>Loan Application Form</mat-card-title>
  <mat-card-content>
    <form [formGroup]="loanForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Applicant Name</mat-label>
        <input matInput formControlName="applicantName" />
        <mat-error
          *ngIf="loanForm.get('applicantName')?.touched && loanForm.get('applicantName')?.invalid"
        >
          Name is required.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput formControlName="applicantEmailId" />
        <mat-error
          *ngIf="
            loanForm.get('applicantEmailId')?.touched && loanForm.get('applicantEmailId')?.invalid
          "
        >
          Valid email is required.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Loan Amount</mat-label>
        <input type="number" matInput formControlName="loanAmount" />
        <mat-error
          *ngIf="loanForm.get('loanAmount')?.touched && loanForm.get('loanAmount')?.invalid"
        >
          Loan amount must be greater than 0.
        </mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit" [disabled]="loanForm.invalid">
        Submit
      </button>
    </form>
  </mat-card-content>
</mat-card>
